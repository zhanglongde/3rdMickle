https://github.com/chenshenhai/koajs-design-note
1.Koa.js原理
  1.5中间件引擎
  1.6普通中间件式HTTP服务实现
     底层是基于回调嵌套去处理中间件队列
2.Koa.js的AOP设计
  2.1AOP面向切面编程
     Koa.js的切面
     切面由中间件机制实现
     一个中间件一般有两个切面
     遵循先进后出的切面执行顺序，类似入栈出栈的顺序
  2.2洋葱模型切面
     基于洋葱模型的HTTP中间件处理流程
     洋葱模式拆解成几个元素：
     生命周期
     中间件
     中间件在生命周期中
         前置操作
         等待其他中间件操作
         后置操作
  2.3HTTP切面流程
3.Koa.js中间件
  3.1中间件分类
        HTTP服务
        路由管理
        模板渲染
        日志
        插件/中间件等AOP能力

        中间件内操作请求 request
        中间件内操作响应 response
        中间件内操作上下文 context
        大多数直接被 app.use() 加载
  3.2狭义中间件
  3.3广义中间件
     间接被app.use()加载
4.狭义中间件-请求/响应拦截
5.狭义中间件-context代理
6.广义中间件-间接中间件处理